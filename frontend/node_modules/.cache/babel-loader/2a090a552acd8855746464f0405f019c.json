{"remainingRequest":"/Users/clothilde/Desktop/OpenClassRooms/Projet 7/frontend/node_modules/babel-loader/lib/index.js!/Users/clothilde/Desktop/OpenClassRooms/Projet 7/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/clothilde/Desktop/OpenClassRooms/Projet 7/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/clothilde/Desktop/OpenClassRooms/Projet 7/frontend/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/clothilde/Desktop/OpenClassRooms/Projet 7/frontend/src/components/Login.vue","mtime":1627546779414},{"path":"/Users/clothilde/Desktop/OpenClassRooms/Projet 7/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/clothilde/Desktop/OpenClassRooms/Projet 7/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/clothilde/Desktop/OpenClassRooms/Projet 7/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/clothilde/Desktop/OpenClassRooms/Projet 7/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEFwaVNlcnZpY2UgZnJvbSAnLi4vYXBpLXNlcnZpY2UnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImxvZ2luIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZXJyb3JzOiBbXSwKICAgICAgdXNlcm5hbWU6IG51bGwsCiAgICAgIHBhc3N3b3JkOiBudWxsLAogICAgICBkYXRhOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyJykpLAogICAgICB1c2VyOiAiIgogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ2luRm9ybTogZnVuY3Rpb24gbG9naW5Gb3JtKGUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuZXJyb3JzID0gW107CgogICAgICBpZiAoIXRoaXMudXNlcm5hbWUpIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCdQc2V1ZG8gcmVxdWlzICEnKTsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLnBhc3N3b3JkKSB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgnTW90IGRlIHBhc3NlIHJlcXVpcycpOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuZXJyb3JzLmxlbmd0aCkgewogICAgICAgIEFwaVNlcnZpY2UubG9naW4odGhpcy51c2VybmFtZSwgdGhpcy5wYXNzd29yZCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlcklkIiwgcmVzdWx0LmRhdGEudXNlcklkKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0b2tlbiIsIHJlc3VsdC5kYXRhLnRva2VuKTsKICAgICAgICAgIGFsZXJ0KCJWb3VzIMOqdGVzIMOgIHByw6lzZW50IGNvbm5lY3TDqSAhIik7CiAgICAgICAgICB2YXIgdXNlcklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJJZCIpOwogICAgICAgICAgQXBpU2VydmljZS5nZXRPbmVVc2VyKHVzZXJJZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgX3RoaXMudXNlciA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzLnVzZXIpOwogICAgICAgICAgICBfdGhpcy51c2VybmFtZSA9IGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VybmFtZScsIF90aGlzLnVzZXIudXNlcm5hbWUpOwogICAgICAgICAgICBfdGhpcy5ub20gPSBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbm9tJywgX3RoaXMudXNlci5ub20pOwogICAgICAgICAgICBfdGhpcy5wcmVub20gPSBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJlbm9tJywgX3RoaXMudXNlci5wcmVub20pOwogICAgICAgICAgICBfdGhpcy5pc0FkbWluID0gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lzQWRtaW4nLCBfdGhpcy51c2VyLmlzQWRtaW4pOwoKICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCcvcG9zdCcpOwogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,OAAA,UAAA,MAAA,gBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,IAFA;AAGA,MAAA,QAAA,EAAA,IAHA;AAIA,MAAA,IAAA,EAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,MAAA,CAAA,CAJA;AAKA,MAAA,IAAA,EAAA;AALA,KAAA;AAOA,GAVA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,qBACA,CADA,EACA;AAAA;;AACA,WAAA,MAAA,GAAA,EAAA;;AACA,UAAA,CAAA,KAAA,QAAA,EAAA;AACA,aAAA,MAAA,CAAA,IAAA,CAAA,iBAAA;AACA;;AACA,UAAA,CAAA,KAAA,QAAA,EAAA;AACA,aAAA,MAAA,CAAA,IAAA,CAAA,qBAAA;AACA;;AACA,UAAA,CAAA,KAAA,MAAA,CAAA,MAAA,EAAA;AACA,QAAA,UAAA,CAAA,KAAA,CAAA,KAAA,QAAA,EAAA,KAAA,QAAA,EACA,IADA,CACA,UAAA,MAAA,EAAA;AACA,UAAA,YAAA,CAAA,OAAA,CAAA,QAAA,EAAA,MAAA,CAAA,IAAA,CAAA,MAAA;AACA,UAAA,YAAA,CAAA,OAAA,CAAA,OAAA,EAAA,MAAA,CAAA,IAAA,CAAA,KAAA;AACA,UAAA,KAAA,CAAA,gCAAA,CAAA;AACA,cAAA,MAAA,GAAA,YAAA,CAAA,OAAA,CAAA,QAAA,CAAA;AACA,UAAA,UAAA,CAAA,UAAA,CAAA,MAAA,EAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AACA,YAAA,KAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,IAAA;AACA,YAAA,KAAA,CAAA,QAAA,GAAA,YAAA,CAAA,OAAA,CAAA,UAAA,EAAA,KAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AACA,YAAA,KAAA,CAAA,GAAA,GAAA,YAAA,CAAA,OAAA,CAAA,KAAA,EAAA,KAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AACA,YAAA,KAAA,CAAA,MAAA,GAAA,YAAA,CAAA,OAAA,CAAA,QAAA,EAAA,KAAA,CAAA,IAAA,CAAA,MAAA,CAAA;AACA,YAAA,KAAA,CAAA,OAAA,GAAA,YAAA,CAAA,OAAA,CAAA,SAAA,EAAA,KAAA,CAAA,IAAA,CAAA,OAAA,CAAA;;AACA,YAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,OAAA;AACA,WAVA,EAWA,KAXA,CAWA,UAAA,KAAA;AAAA,mBAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA;AAAA,WAXA;AAYA,SAlBA;AAmBA;;AACA,MAAA,CAAA,CAAA,cAAA;AACA;AA/BA;AAZA,CAAA","sourcesContent":["<template>\n        <section id=\"login\" class=\"login\">\n            <h2>Connexion</h2>\n            <form id=\"login-form\" class=\"login_form\" @submit=\"loginForm\">\n                <div class=\"login_form--item\">\n                    <label class=\"login_form--item-label\" for=\"username\">Nom d'utilisateur</label>\n                    <input class=\"login_form--item-input\"\n                    type=\"text\"\n                    id=\"username\"\n                    v-model=\"username\">\n                </div>\n\n                <div class=\"login_form--item\">\n                    <label class=\"login_form--item-label\" for=\"password\">Mot de Passe</label>\n                    <input class=\"login_form--item-input\" \n                    type=\"password\"\n                    id=\"password\"\n                    v-model=\"password\">\n\n                </div>\n\n                <button class=\"login_form--btn\" type=\"submit\">Connexion</button>\n            </form>\n        </section>\n</template>\n\n<script>\n\nimport  ApiService from '../api-service';\n\nexport default {\n    name: \"login\",\n    data() {\n        return {\n            errors: [],\n            username: null,\n            password: null,\n            data: JSON.parse(localStorage.getItem('user')),\n            user: \"\",\n        }\n    },\n\n    methods: {\n        loginForm(e) {\n            this.errors = [];\n            if (!this.username ) {\n            this.errors.push('Pseudo requis !');\n            }\n            if (!this.password) {\n              this.errors.push('Mot de passe requis');\n            }\n            if (!this.errors.length) {\n        ApiService.login(this.username, this.password)\n            .then((result) => {\n                localStorage.setItem(\"userId\", result.data.userId)\n                localStorage.setItem(\"token\", result.data.token)\n            alert(\"Vous êtes à présent connecté !\")\n            let userId = localStorage.getItem(\"userId\");\n            ApiService.getOneUser(userId)\n        \n            .then(response => {\n            this.user = response.data\n            console.log(this.user)\n            this.username = localStorage.setItem('username', this.user.username)\n            this.nom = localStorage.setItem('nom', this.user.nom)\n            this.prenom = localStorage.setItem('prenom', this.user.prenom)\n            this.isAdmin = localStorage.setItem('isAdmin', this.user.isAdmin)\n            this.$router.push('/post');\n            })\n            .catch(error => console.log(error))\n            })\n            }\n            e.preventDefault();  \n        },\n    }\n}\n\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\nh2 {\n    text-align: center;\n}\n.login_form {\n    display: flex;\n    flex-direction: column;\n\n    &--item {\n        display: flex;\n        justify-content: center;\n        margin: .9rem;\n\n        &-label {\n            margin-right: 1rem;\n        }\n    }\n    &--btn {\n        max-width: fit-content;\n        align-self: center;\n        margin: 1.5rem;\n        background-color: #fd2d02;\n        color: #FFF;\n        border-radius: 10px;\n        border: none;\n        padding: .5rem;\n        box-shadow: 2px 3px 10px #e2e2e2;\n\n        &:hover {\n            opacity: 0.8;\n            box-shadow: 1px 1px 10px #808080;\n            cursor: pointer;\n        }\n    }\n}\n</style>\n"],"sourceRoot":"src/components"}]}