{"remainingRequest":"/Users/clothilde/Desktop/OpenClassRooms/Projet 7/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/clothilde/Desktop/OpenClassRooms/Projet 7/frontend/src/components/Login.vue?vue&type=style&index=0&id=ef68022e&scoped=true&lang=scss&","dependencies":[{"path":"/Users/clothilde/Desktop/OpenClassRooms/Projet 7/frontend/src/components/Login.vue","mtime":1627546779414},{"path":"/Users/clothilde/Desktop/OpenClassRooms/Projet 7/frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/clothilde/Desktop/OpenClassRooms/Projet 7/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/clothilde/Desktop/OpenClassRooms/Projet 7/frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/clothilde/Desktop/OpenClassRooms/Projet 7/frontend/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/clothilde/Desktop/OpenClassRooms/Projet 7/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/clothilde/Desktop/OpenClassRooms/Projet 7/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaDIgewogICAgdGV4dC1hbGlnbjogY2VudGVyOwp9Ci5sb2dpbl9mb3JtIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwoKICAgICYtLWl0ZW0gewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgbWFyZ2luOiAuOXJlbTsKCiAgICAgICAgJi1sYWJlbCB7CiAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMXJlbTsKICAgICAgICB9CiAgICB9CiAgICAmLS1idG4gewogICAgICAgIG1heC13aWR0aDogZml0LWNvbnRlbnQ7CiAgICAgICAgYWxpZ24tc2VsZjogY2VudGVyOwogICAgICAgIG1hcmdpbjogMS41cmVtOwogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZDJkMDI7CiAgICAgICAgY29sb3I6ICNGRkY7CiAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDsKICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgcGFkZGluZzogLjVyZW07CiAgICAgICAgYm94LXNoYWRvdzogMnB4IDNweCAxMHB4ICNlMmUyZTI7CgogICAgICAgICY6aG92ZXIgewogICAgICAgICAgICBvcGFjaXR5OiAwLjg7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDFweCAxcHggMTBweCAjODA4MDgwOwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n        <section id=\"login\" class=\"login\">\n            <h2>Connexion</h2>\n            <form id=\"login-form\" class=\"login_form\" @submit=\"loginForm\">\n                <div class=\"login_form--item\">\n                    <label class=\"login_form--item-label\" for=\"username\">Nom d'utilisateur</label>\n                    <input class=\"login_form--item-input\"\n                    type=\"text\"\n                    id=\"username\"\n                    v-model=\"username\">\n                </div>\n\n                <div class=\"login_form--item\">\n                    <label class=\"login_form--item-label\" for=\"password\">Mot de Passe</label>\n                    <input class=\"login_form--item-input\" \n                    type=\"password\"\n                    id=\"password\"\n                    v-model=\"password\">\n\n                </div>\n\n                <button class=\"login_form--btn\" type=\"submit\">Connexion</button>\n            </form>\n        </section>\n</template>\n\n<script>\n\nimport  ApiService from '../api-service';\n\nexport default {\n    name: \"login\",\n    data() {\n        return {\n            errors: [],\n            username: null,\n            password: null,\n            data: JSON.parse(localStorage.getItem('user')),\n            user: \"\",\n        }\n    },\n\n    methods: {\n        loginForm(e) {\n            this.errors = [];\n            if (!this.username ) {\n            this.errors.push('Pseudo requis !');\n            }\n            if (!this.password) {\n              this.errors.push('Mot de passe requis');\n            }\n            if (!this.errors.length) {\n        ApiService.login(this.username, this.password)\n            .then((result) => {\n                localStorage.setItem(\"userId\", result.data.userId)\n                localStorage.setItem(\"token\", result.data.token)\n            alert(\"Vous êtes à présent connecté !\")\n            let userId = localStorage.getItem(\"userId\");\n            ApiService.getOneUser(userId)\n        \n            .then(response => {\n            this.user = response.data\n            console.log(this.user)\n            this.username = localStorage.setItem('username', this.user.username)\n            this.nom = localStorage.setItem('nom', this.user.nom)\n            this.prenom = localStorage.setItem('prenom', this.user.prenom)\n            this.isAdmin = localStorage.setItem('isAdmin', this.user.isAdmin)\n            this.$router.push('/post');\n            })\n            .catch(error => console.log(error))\n            })\n            }\n            e.preventDefault();  \n        },\n    }\n}\n\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\nh2 {\n    text-align: center;\n}\n.login_form {\n    display: flex;\n    flex-direction: column;\n\n    &--item {\n        display: flex;\n        justify-content: center;\n        margin: .9rem;\n\n        &-label {\n            margin-right: 1rem;\n        }\n    }\n    &--btn {\n        max-width: fit-content;\n        align-self: center;\n        margin: 1.5rem;\n        background-color: #fd2d02;\n        color: #FFF;\n        border-radius: 10px;\n        border: none;\n        padding: .5rem;\n        box-shadow: 2px 3px 10px #e2e2e2;\n\n        &:hover {\n            opacity: 0.8;\n            box-shadow: 1px 1px 10px #808080;\n            cursor: pointer;\n        }\n    }\n}\n</style>\n"]}]}